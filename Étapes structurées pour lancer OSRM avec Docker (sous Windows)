âœ… Ã‰tapes structurÃ©es pour lancer OSRM avec Docker (sous Windows)
ğŸ—‚ï¸ PrÃ©-requis :
Fichier .osm.pbf : berlin-latest.osm.pbf

Dossier de travail local : D:\PFE SLI 2025\osrm\data

Docker installÃ©

Connexion Internet pour tester l'API avec curl

ğŸ”§ 1. Extraction des donnÃ©es (osrm-extract)
Cette commande extrait les donnÃ©es de routage depuis le fichier .osm.pbf.

powershell
docker run -t -v "D:\PFE SLI 2025\osrm\data:/data" ghcr.io/project-osrm/osrm-backend osrm-extract -p /opt/car.lua /data/berlin-latest.osm.pbf
if ($LASTEXITCODE -ne 0) { Write-Output "osrm-extract failed" }
ğŸ§© 2. Partition des donnÃ©es (osrm-partition)
Ã‰tape nÃ©cessaire pour prÃ©parer les graphes avec lâ€™algorithme MLD (Multi-Level Dijkstra).

powershell
docker run -t -v "D:\PFE SLI 2025\osrm\data:/data" ghcr.io/project-osrm/osrm-backend osrm-partition /data/berlin-latest.osrm
if ($LASTEXITCODE -ne 0) { Write-Output "osrm-partition failed" }
ğŸ› ï¸ 3. Personnalisation (osrm-customize)
Cette Ã©tape ajuste les vitesses ou les coÃ»ts selon les types de routes.

powershell
docker run -t -v "D:\PFE SLI 2025\osrm\data:/data" ghcr.io/project-osrm/osrm-backend osrm-customize /data/berlin-latest.osrm
if ($LASTEXITCODE -ne 0) { Write-Output "osrm-customize failed" }
ğŸš€ 4. Lancement du serveur de routage (osrm-routed)
DÃ©marre lâ€™API locale dâ€™OSRM (port 5000) avec lâ€™algorithme MLD.

powershell
docker run -t -i -p 5000:5000 --name nkhtchlk -v "D:\PFE SLI 2025\osrm\data:/data" ghcr.io/project-osrm/osrm-backend osrm-routed --algorithm mld /data/berlin-latest.osrm
âœ… Si tu as dÃ©jÃ  crÃ©Ã© le conteneur nkhtchlk, tu peux simplement le redÃ©marrer avec :

powershell
docker start nkhtchlk
ğŸŒ 5. Test de l'API locale OSRM
Effectue une requÃªte de routage entre deux coordonnÃ©es Ã  Berlin.

powershell
curl.exe "http://localhost:5000/route/v1/driving/13.388860,52.517037;13.385983,52.496891?steps=true&alternatives=true"
ğŸ§­ RÃ©sumÃ© des Ã©tapes dans lâ€™ordre :
1- osrm-extract â€“ Extraction du fichier OSM
2- osrm-partition â€“ PrÃ©paration du graphe (MLD)
3- osrm-customize â€“ Ajustements personnalisÃ©s
4- osrm-routed â€“ Lancement du serveur
5- curl â€“ Test d'une requÃªte HTTP

